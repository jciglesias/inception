#******************************************************************************#
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: jiglesia <jiglesia@student.42.fr>          +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2021/06/07 13:38:23 by jiglesia          #+#    #+#              #
#    Updated: 2021/06/07 20:05:24 by jiglesia         ###   ########.fr        #
#                                                                              #
#******************************************************************************#

YAML		=	docker-compose.yml
SRCS		=	./srcs/

CONTS		=	nginx wordpress mariadb

COMPOSE		= 	docker-compose
ECHO		=	/bin/echo -e
BLUE		=	 "\e[34m"
GREEN		=	 "\e[92m"
YELLOW		=	 "\e[33m"
E0M			=	 "\e[0m"

#************************ MAIN COMPOSITION *************************

all		:	up
			@$(ECHO) $(BLUE)
			@$(ECHO) "                    ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒"
			@$(ECHO) "              ▒▒▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒▒▒"
			@$(ECHO) "          ▒▒▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒▒▒"
			@$(ECHO) "        ░░░░░░  ░░░░░░      ░░░░░░░░    ░░░░░░░░░░░░▒▒"
			@$(ECHO) "      ▒▒░░░░░░░░      ░░░░░░        ░░░░  ░░░░░░    ░░▒▒"
			@$(ECHO) "    ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░      ░░░░░░░░▒▒"
			@$(ECHO) "    ▒▒  ░░░░░░        ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒"
			@$(ECHO) "  ▒▒  ░░      ░░░░░░░░    ░░░░░░      ░░░░░░░░░░░░        ▒▒"
			@$(ECHO) "  ░░░░░░░░░░░░░░░░░░░░░░░░      ░░░░░░            ░░░░░░░░░░░░"
			@$(ECHO) "▒▒░░    ░░░░░░      ░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░    ░░░░▒▒"
			@$(ECHO) "▒▒  ░░░░      ░░░░░░        ░░░░░░░░        ░░░░░░  ░░░░    ░░"
			@$(ECHO) "▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░        ░░░░░░░░      ░░░░░░▒▒░░▒▒"
			@$(ECHO) "▒▒▒▒▒▒    ▒▒░░░░░░▒▒▒▒  ▒▒░░░░░░░░░░░░░░▒▒▒▒░░░░░░░░▒▒    ▒▒▒▒"
			@$(ECHO) "          ▒▒░░░░▒▒      ░░░░░░░░░░░░▒▒▒▒    ▒▒▒▒░░░░▒▒"
			@$(ECHO) "          ▒▒░░░░          ░░░░░░░░░░░░          ░░░░▒▒"
			@$(ECHO) "                            ▒▒▒▒▒▒  ▒▒"
			@$(ECHO) "                            ▒▒░░░░░░▒▒"
			@$(ECHO) "                            ▒▒  ░░░░▒▒"
			@$(ECHO) "                            ▒▒░░    ▒▒"
			@$(ECHO) "                            ▒▒░░░░  ▒▒"
			@$(ECHO) "                            ░░░░░░  ▒▒"
			@$(ECHO) "                            ▒▒    ░░▒▒"
			@$(ECHO) "                           "$(BLUE)" ▒▒░░░░░░▒▒"$(E0M)"                                                    ████"
			@$(ECHO) "                           "$(BLUE)" ▒▒░░░░░░▒▒"$(E0M)"                                                ██░░▓▓██"
			@$(ECHO) "                          ████▓▓████████                                            ██▒▒▒▒▒▒██"
			@$(ECHO) "                    ██████▒▒▒▒▒▒▒▒▒▒▒▒▒▒██████                    ██████        ████▒▒▒▒▒▒▒▒██"
			@$(ECHO) "                ████▓▓▓▓▓▓▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓▓▓▓▓▓▓░░                ██▓▓▓▓██░░▓▓██▒▒▓▓▒▒▒▒▒▒██"
			@$(ECHO) "            ████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒████            ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██"
			@$(ECHO) "          ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██            ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██"
			@$(ECHO) "        ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██            ████▒▒▒▒▒▒▒▒▒▒▒▒██"
			@$(ECHO) "      ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██              ████▓▓██▒▒▒▒▒▒▓▓"
			@$(ECHO) "    ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██                  ██▒▒▒▒▒▒▒▒██"
			@$(ECHO) "    ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██                ██▒▒▒▒▒▒▒▒██"
			@$(ECHO) "  ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▓▓            ██▓▓▒▒▒▒▒▒▒▒▒▒██"
			@$(ECHO) "  ██▒▒▒▒▒▒▒▒▒▒  ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██          ██▒▒▒▒▒▒▒▒▒▒▒▒██"
			@$(ECHO) "██▒▒▒▒▒▒▒▒▒▒▒▒████▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██        ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒██"
			@$(ECHO) "██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██      ██▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒██"
			@$(ECHO) "██▒▒"$(BLUE)"░░░░░░░░"$(E0M)"▒▒▒▒▒▒▒▒"$(BLUE)"░░░░░░░░"$(E0M)"▒▒▒▒▒▒▒▒"$(BLUE)"░░░░░░░░"$(E0M)"▒▒▒▒▒▒▒▒"$(BLUE)"░░░░░░░░"$(E0M)"▒▒▒▒▒▒▒▒"$(BLUE)"░░░░░░░░"$(E0M)"██▒▒▒▒▒▒"$(BLUE)"░░░░░░░░"$(E0M)"▒▒██"
			@$(ECHO)  $(BLUE)"░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░"
			@$(ECHO) "░░░░░░▒▒░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░"
			@$(ECHO) "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░"
			@$(ECHO) "░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░"$(E0M)

up		:
			@(cd $(SRCS) && $(COMPOSE) -f $(YAML) up -d --build)

down	:
			@(cd $(SRCS) && $(COMPOSE) -f $(YAML) down)

start	:
			@(cd $(SRCS) && $(COMPOSE) -f $(YAML) start)

stop	:
			@(cd $(SRCS) && $(COMPOSE) -f $(YAML) stop)

ps		:
			@(cd $(SRCS) && $(COMPOSE) -f $(YAML) ps)

rm		:
			@(cd $(SRCS) && $(COMPOSE) -f $(YAML) rm $(CONTS))

config	:
			@(cd $(SRCS) && $(COMPOSE) -f $(YAML) config)

re		:	stop rm all

.PHONY	:	all up down start stop ps rm config
